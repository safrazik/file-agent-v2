(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{RvbL:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n("q1tI"),o=n.n(r),a=n("30CX"),u=n("ia3d"),i=n("+PsM"),s=n("1OyB"),l=n("vuIU"),f=new(function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createError",value:function(e,t,n,r){var o=new Error(e);return o.error=!0,t&&(o.code=t),o.request=n,o.response=r,o}},{key:"settle",value:function(e,t,n){var r=function(e){return e>=200&&e<300};n.status&&r&&!r(n.status)?t(this.createError("Request failed with status code "+n.status,null,n.request,n)):e(n)}},{key:"request",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,u){var i=new XMLHttpRequest;i.open(e,t,!0),i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var e=i.getAllResponseHeaders(),t=i.responseText,r=i.getResponseHeader("Content-Type");if(r&&-1!==r.indexOf("application/json"))t=JSON.parse(t);else try{t=JSON.parse(t)}catch(s){}var o={data:t,status:1223===i.status?204:i.status,statusText:1223===i.status?"No Content":i.statusText,headers:e,request:i};n.settle(a,u,o),i=null}},i.onabort=function(){i&&(u(n.createError("Request aborted","ECONNABORTED",i)),i=null)},i.onerror=function(){u(n.createError("Network Error",null,i)),i=null},i.ontimeout=function(){u(n.createError("timeout exceeded","ECONNABORTED",i)),i=null},"function"===typeof o&&o(i),i.send(r)}))}},{key:"post",value:function(e,t,n){return this.request("POST",e,t,n)}},{key:"delete",value:function(e,t,n){return this.request("DELETE",e,t,n)}},{key:"put",value:function(e,t,n){return this.request("PUT",e,t,n)}}]),e}());function c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=new(function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"addHeaders",value:function(e,t){if(e.setRequestHeader("Accept","application/json"),t)for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n]);return e}},{key:"doUpload",value:function(e,t,n,r,o){var a=this;return f.post(e,n,(function(e){a.addHeaders(e,t),e.upload.addEventListener("progress",r,!1),"function"===typeof o&&o(e)}))}},{key:"doDeleteUpload",value:function(e,t,n,r){var o=this;return"string"!==typeof n&&(n=JSON.stringify(n)),f.delete(e,n,(function(e){e.setRequestHeader("Content-Type","application/json"),o.addHeaders(e,t),"function"===typeof r&&r(e)}))}},{key:"doUpdateUpload",value:function(e,t,n,r){var o=this;return"string"!==typeof n&&(n=JSON.stringify(n)),f.put(e,n,(function(e){e.setRequestHeader("Content-Type","application/json"),o.addHeaders(e,t),"function"===typeof r&&r(e)}))}},{key:"prepareUploadError",value:function(e,t,n){var r=t.message;if(t.response&&t.response.data)try{r=t.response.data.error||JSON.parse(t.response.data).error}catch(o){}e.uploadError(r),e.upload.error=r,n&&setTimeout((function(){e.uploadError(!1)}),n)}},{key:"upload",value:function(e,t,n,r,o,a){var u=this,i=function(){};o&&(i=function(){var e,t=0,r=c(n);try{for(r.s();!(e=r.n()).done;){t+=e.value.progress()}}catch(a){r.e(a)}finally{r.f()}o(t/n.length)});var s,l=[],f=0,d=c(n);try{var p=function(){var n=s.value,o=void 0;"function"===typeof r?o=r(n):((o=new FormData).append("file",n.file),o.append("filename",n.name()));var c=u.doUpload(e,t,o,(function(e){var t=100*e.loaded/e.total;n.progress(t>=100?99.9999:t),i()}),(function(e){n.xhr=e,"function"===typeof a&&a(e)}));l.push(new Promise((function(e,t){c.then((function(t){delete n.xhr,n.upload.data=t.data,n.upload.error=!1,n.progress(100),n.xhrQueue&&(n.xhrQueue(),delete n.xhrQueue),e(t)}),(function(t){u.prepareUploadError(n,t),e(t),f++}))})))};for(d.s();!(s=d.n()).done;)p()}catch(v){d.e(v)}finally{d.f()}return new Promise((function(e,t){Promise.all(l).then((function(n){f&&f===l.length?t(n):e(n)}),t)}))}},{key:"deleteUpload",value:function(e,t,n,r,o){var a=this;return new Promise((function(u,i){n.xhr&&n.xhr.abort(),void 0===r&&(r=n.upload.data),r&&a.doDeleteUpload(e,t,r,(function(e){"function"===typeof o&&o(e)})).then((function(e){u(e)}),(function(e){a.prepareUploadError(n,e),i(e)}))}))}},{key:"updateUpload",value:function(e,t,n,r,o){var a=this;return new Promise((function(u,i){if(n.xhr)return n.xhrQueue=function(){a.updateUpload(e,t,n,r)},u();void 0===r&&((r=n.upload.data||{}).old_filename=n.oldFileName,r.filename=n.name()),r&&a.doUpdateUpload(e,t,r,(function(e){"function"===typeof o&&o(e)})).then((function(e){n.upload.data=e.data,n.upload.error=!1,u(e)}),(function(e){a.prepareUploadError(n,e),i(e)}))}))}},{key:"doTusUpload",value:function(e,t,n,r,o,a){var u=a?a(n):{};return new Promise((function(a,i){if(!e)return i(new Error("tus-js-client required for resumable uploads. Install https://github.com/tus/tus-js-client"));var s=n.file,l=new e.Upload(s,{endpoint:t,headers:r,retryDelays:u.retryDelays?u.retryDelays:[0,3e3,5e3,1e4,2e4],metadata:u.metadata?u.metadata:{filename:s.name,filetype:s.type},onError:function(e){i(e)},onProgress:function(e,t){o({loaded:e,total:t})},onSuccess:function(){a(l)}});n.tusUpload=l,l.findPreviousUploads().then((function(e){e.length>0&&l.resumeFromPreviousUpload(e[0]),l.start()}))}))}},{key:"tusUpload",value:function(e,t,n,r,o,a){var u=this,i=function(){};o&&(i=function(){var e,t=0,n=c(r);try{for(n.s();!(e=n.n()).done;){t+=e.value.progress()}}catch(a){n.e(a)}finally{n.f()}o(t/r.length)});var s,l=[],f=c(r);try{var d=function(){var r=s.value,o=u.doTusUpload(e,t,r,n,(function(e){var t=100*e.loaded/e.total;r.progress(t>=100?99.9999:t),i()}),a);o.then((function(e){r.progress(100)}),(function(e){u.prepareUploadError(r,e)})),l.push(o)};for(f.s();!(s=f.n()).done;)d()}catch(p){f.e(p)}finally{f.f()}return Promise.all(l)}},{key:"tusDeleteUpload",value:function(e,t,n,r){var o=this;return new Promise((function(t,n){if(!e)return n("tus required");if(!r.tusUpload)return t();var a=function(e){return new Promise((function(t,n){r.tusUpload.abort(e).then(t,(function(e){o.prepareUploadError(r,e),n(e)}))}))};a(!0).then(t,n)}))}}]),e}()),v=new(function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"upload",value:function(e,t,n,r,o,u,i){return n.resumable?p.tusUpload(a.plugins.tus,e,t,r,(function(e){}),n.tusOptions):p.upload(e,t,r,o,u,i)}},{key:"deleteUpload",value:function(e,t,n,r,o,u){return n.resumable?p.tusDeleteUpload(a.plugins.tus,e,t,r):p.deleteUpload(e,t,r,o,u)}},{key:"updateUpload",value:function(e,t,n,r,o,a){return p.updateUpload(e,t,r,o,a)}}]),e}());a.plugins.uploader=v;var y=n("86uN"),h=o.a.createElement;a.plugins.uploader=v;a.plugins.tus=u;var m="4MB";function g(){var e=Object(r.useState)([]),t=e[0],n=e[1],o=Object(r.useState)(!0),a=o[0],u=(o[1],Object(r.useState)(!0)),s=u[0],l=(u[1],Object(r.useState)(!0)),f=l[0];l[1];return t.length||Object(y.fetchInitialFileRecords)().then((function(e){n(e),setTimeout((function(){setTimeout((function(){e[0].progress(34),e[0].setError("Custom Error test"),e[0].nameWithoutExtension("Hello Sample")}),2e3),n(e.reverse().concat([]))}),2e3)})),h("div",null,h(i.a,{uploadUrl:"https://master.tus.io/files/",resumable:!0,multiple:!0,sortable:!0,fileRecords:t,deletable:a,editable:s,linkable:f,maxSize:m,onBeforeDelete:function(e){return console.log("onBeforrrrrr",e.name()),!0},onBeforeRename:function(e){console.log("onBefoererere",",,,,")},onSelect:function(e){console.log("onSelect",e)},onRename:function(e){if(console.log("onRename",e.name(),e),-1!==e.name().toLowerCase().indexOf("shit"))return e.setError("Shitty name is not allowed."),new Promise((function(e,t){setTimeout((function(){e(!1)}),3e3)}))},onDelete:function(e){if(console.log("onDelete",e.name(),e),-1!==e.name().toLowerCase().indexOf("system"))return new Promise((function(t,n){setTimeout((function(){e.setError("System files cannot be deleted."),t(!1)}),1e3)}))},onChange:function(e){n(e)},slotsOld:{afterInner:"After inner",afterOuter:"After outer",beforeInner:document.getElementById("some-unique-el"),beforeOuter:"Before outer",sortableHandle:"Sortable Handle"}}))}}}]);